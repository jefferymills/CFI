var CFI=CFI||{};var category="attendance";CFI.init=function(){CFI.getDots(category,function(a){CFI.dots=new CFI.addDots(a)});$("nav ul li").bind("click",function(){CFI.getDots($(this).attr("id"),function(a){})});return CFI.dots};CFI.addDots=function(b){this.path=[];if(b){for(var a=b.length-1;a>=0;a--){this.path[a]=new Path.Circle(new Point(b[a].x_position,b[a].y_position),1);this.path[a].fillColor="#"+b[a].primary_color;if(b[a].cat<1){this.path[a].opacity=0}else{this.path[a].opacity=0.8}this.path[a].newSize=CFI.getSize(b[a],b);this.path[a].teamid=b[a].id;this.path[a].team=b[a]}}};CFI.getSize=function(b,f){if(category==="winning_percentage"){var a=f[f.length-1].cat,e=b.cat,d=f[0].cat,c=((e-d)*60+5)}else{var a=f[f.length-1].cat,e=b.cat,d=f[0].cat,c=(((e-d)/a)*45)+5}return c};CFI.getDots=function(a,b){$.ajax({url:"index.php/site/dots?category="+a,dataType:"json",success:function(c){b(c)}})};var Dots=CFI.init();var selected=0;function onMouseMove(c){if(CFI.dots){selected=0;for(var b=0;b<CFI.dots.path.length;b++){if(CFI.dots.path[b].bounds.contains(c.point)&&CFI.dots.path[b].bounds.width>CFI.dots.path[b].newSize&&selected===0){if(CFI.dots.path[b].team.cat>0){CFI.dots.path[b].opacity=1;var e=15;var d=160;if(window.mouseXPos>($(document).width()/2)-70){e=-185}if(window.mouseYPos<150){d=0}$(".team_modal").attr("id","team"+b).css({left:window.mouseXPos+e,top:window.mouseYPos-d,borderBottom:"5px solid #"+CFI.dots.path[b].team.second_color}).addClass("visible");$(".team_info").css("backgroundColor","#"+CFI.dots.path[b].team.primary_color);$(".team_name").html(CFI.dots.path[b].team.short_name);$(".team_location").html(CFI.dots.path[b].team.city+", "+CFI.dots.path[b].team.state);$(".team_conference").html(CFI.dots.path[b].team.conference);if(category==="winning_percentage"){var a=CFI.dots.path[b].team.cat.toString();a=a.slice(2,4)+"%";$(".category_number").html(a)}else{$(".category_number").html(addCommas(CFI.dots.path[b].team.cat))}selected=1}}else{if(CFI.dots.path[b].team.cat>0){CFI.dots.path[b].opacity=0.8}$("#team"+b).removeClass("visible")}}}}var growth=1.05;function onFrame(b){if(CFI.dots){for(var a=CFI.dots.path.length-1;a>=0;a--){if(CFI.dots.path[a].bounds.width<CFI.dots.path[a].newSize){CFI.dots.path[a].scale(growth)}}}}function addCommas(b){b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2")}return x1+x2}$(document).ready(function(){$("#themap").mousemove(function(a){window.mouseXPos=a.pageX;window.mouseYPos=a.pageY});$(".hide_logo").addClass("logo");$(".map-title").removeClass("hide-map-title");$(".map-container").removeClass("hide-map-container");$(".nav-button").click(function(){$("nav ul").toggleClass("show");$(this).toggleClass("hide")}).removeClass("hide");$("nav ul li").click(function(){$(".map-title h2").html($(this).html());$("nav ul li").removeClass("current");$(this).addClass("current");$("nav ul").toggleClass("show");$(".nav-button").toggleClass("hide");category=$(this).attr("id");CFI.getDots(category,function(b){for(var a=CFI.dots.path.length-1;a>=0;a--){CFI.dots.path[a].remove()}CFI.dots=new CFI.addDots(b)})})});